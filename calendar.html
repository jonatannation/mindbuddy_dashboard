<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindbuddy - Calendar</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700&family=Inter:wght@500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        mindbuddy: {
                            navy: '#293A4A',
                            lightblue: '#68B2FC',
                            gray: '#666666',
                            lightgray: '#F2F2F2',
                            green: '#68FC9B',
                            yellow: '#FFA828',
                            red: '#FF7970',
                        },
                    },
                    fontFamily: {
                        'space-grotesk': ['Space Grotesk', 'sans-serif'],
                        'inter': ['Inter', 'sans-serif'],
                    },
                },
            },
        }
    </script>
    <style>
        .fc-header-toolbar {
            padding: 1rem;
        }
        .fc-event {
            cursor: pointer;
        }
        .card-shadow {
            box-shadow: 0px 8px 20px rgba(1, 50, 18, 0.02), 0px 0px 16px rgba(4, 109, 40, 0.06);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 600px;
            border-radius: 8px;
        }
    </style>
</head>
<body class="bg-mindbuddy-lightgray font-inter">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="bg-gray-200 w-64 flex-shrink-0 overflow-y-auto fixed h-full flex flex-col">
            <div class="p-4 flex-grow">
                <div class="flex items-center mb-8">
                    <img src="Assets/LogoText.png" alt="Mindbuddy Logo" class="h-8 w-auto">
                </div>
                <nav>
                    <ul>
                        <li class="mb-4">
                            <a href="index.html" class="flex items-center text-gray-800 hover:text-mindbuddy-lightblue transition duration-300">
                                <i class="fas fa-chart-line w-8 mr-3 text-center"></i>
                                <span>Overview</span>
                            </a>
                        </li>
                        <li class="mb-4">
                            <a href="loggedSessions.html" class="flex items-center text-gray-800 hover:text-mindbuddy-lightblue transition duration-300">
                                <i class="fas fa-clipboard-list w-8 mr-3 text-center"></i>
                                <span>Logged Sessions</span>
                            </a>
                        </li>
                        <li class="mb-4">
                            <a href="messaging.html" class="flex items-center text-gray-800 hover:text-mindbuddy-lightblue transition duration-300">
                                <i class="fas fa-comments w-8 mr-3 text-center"></i>
                                <span>Messaging</span>
                            </a>
                        </li>
                        <li class="mb-4">
                            <a href="calendar.html" class="flex items-center text-mindbuddy-lightblue transition duration-300">
                                <i class="fas fa-calendar w-8 mr-3 text-center"></i>
                                <span>Calendar</span>
                            </a>
                        </li>
                        <li class="mb-4">
                            <a href="reports.html" class="flex items-center text-gray-800 hover:text-mindbuddy-lightblue transition duration-300">
                                <i class="fas fa-file-alt w-8 mr-3 text-center"></i>
                                <span>Reports</span>
                            </a>
                        </li>
                        <li class="mb-4">
                            <a href="mindbuddyHub.html" class="flex items-center text-gray-800 hover:text-mindbuddy-lightblue transition duration-300">
                                <i class="fas fa-book w-8 mr-3 text-center"></i>
                                <span>Mindbuddy Hub</span>
                            </a>
                        </li>
                        <li class="mb-4">
                            <a href="settings.html" class="flex items-center text-gray-800 hover:text-mindbuddy-lightblue transition duration-300">
                                <i class="fas fa-cog w-8 mr-3 text-center"></i>
                                <span>Settings</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="p-4 border-t border-gray-300">
                <a href="#" class="flex items-center text-gray-800 hover:text-mindbuddy-lightblue transition duration-300">
                    <i class="fas fa-sign-out-alt w-8 mr-3 text-center"></i>
                    <span>Log out</span>
                </a>
            </div>
        </aside>

        <!-- Main content -->
        <div class="flex-1 overflow-y-auto ml-64">
            <div class="p-10">
                <h1 class="text-3xl font-semibold mb-6 text-gray-800 font-space-grotesk">Calendar</h1>
                <div class="bg-white rounded-lg card-shadow p-6 mb-8">
                    <div id="calendar"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- New event popup -->
    <div id="newEventPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-8 rounded-lg w-full max-w-md transform transition-all duration-300 scale-90 opacity-0" id="popupContent">
            <h2 class="text-2xl font-semibold mb-6 text-mindbuddy-navy">New Event</h2>
            <div class="mb-6">
                <label for="eventType" class="block text-sm font-medium text-mindbuddy-gray mb-2">Event Type</label>
                <div class="relative">
                    <select id="eventType" class="appearance-none w-full bg-white border border-mindbuddy-lightblue text-mindbuddy-navy py-2 px-4 pr-8 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-mindbuddy-lightblue focus:border-transparent">
                        <option value="">Select event type</option>
                        <option value="workshop">Workshop</option>
                        <option value="1-to-1">1-to-1</option>
                        <option value="other">Other</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-mindbuddy-navy">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                    </div>
                </div>
            </div>
            <div class="mb-6">
                <label for="eventTitle" class="block text-sm font-medium text-mindbuddy-gray mb-2">Event Title</label>
                <input type="text" id="eventTitle" class="w-full p-3 border border-mindbuddy-lightblue rounded-lg focus:outline-none focus:ring-2 focus:ring-mindbuddy-navy" placeholder="Enter event title">
            </div>
            <div class="mb-6">
                <label for="eventDate" class="block text-sm font-medium text-mindbuddy-gray mb-2">Date</label>
                <input type="date" id="eventDate" class="w-full p-3 border border-mindbuddy-lightblue rounded-lg focus:outline-none focus:ring-2 focus:ring-mindbuddy-navy">
            </div>
            <div class="mb-6">
                <label for="eventTime" class="block text-sm font-medium text-mindbuddy-gray mb-2">Time</label>
                <input type="time" id="eventTime" class="w-full p-3 border border-mindbuddy-lightblue rounded-lg focus:outline-none focus:ring-2 focus:ring-mindbuddy-navy">
            </div>
            <div class="mb-6">
                <label for="eventDescription" class="block text-sm font-medium text-mindbuddy-gray mb-2">Description</label>
                <textarea id="eventDescription" rows="3" class="w-full p-3 border border-mindbuddy-lightblue rounded-lg focus:outline-none focus:ring-2 focus:ring-mindbuddy-navy" placeholder="Enter event description"></textarea>
            </div>
            <div class="flex justify-end space-x-4">
                <button id="cancelNewEvent" class="px-6 py-2 bg-mindbuddy-lightgray text-mindbuddy-gray rounded-lg hover:bg-gray-300 transition duration-300">Cancel</button>
                <button id="saveNewEvent" class="px-6 py-2 bg-mindbuddy-navy text-white rounded-lg hover:bg-mindbuddy-lightblue transition duration-300">Save</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var calendarEl = document.getElementById('calendar');
            var newEventPopup = document.getElementById('newEventPopup');
            var popupContent = document.getElementById('popupContent');
            var eventTitle = document.getElementById('eventTitle');
            var eventDate = document.getElementById('eventDate');
            var eventTime = document.getElementById('eventTime');
            var eventDescription = document.getElementById('eventDescription');
            var cancelNewEventBtn = document.getElementById('cancelNewEvent');
            var saveNewEventBtn = document.getElementById('saveNewEvent');
            var eventType = document.getElementById('eventType');

            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'timeGridWeek',
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'timeGridWeek,dayGridMonth'
                },
                selectable: true,
                select: function(info) {
                    eventDate.value = info.startStr.slice(0, 10);
                    eventTime.value = info.startStr.slice(11, 16);
                    showPopup();
                }
            });
            calendar.render();

            function showPopup() {
                newEventPopup.classList.remove('hidden');
                setTimeout(() => {
                    popupContent.classList.remove('scale-90', 'opacity-0');
                    popupContent.classList.add('scale-100', 'opacity-100');
                }, 10);
            }

            function hidePopup() {
                popupContent.classList.remove('scale-100', 'opacity-100');
                popupContent.classList.add('scale-90', 'opacity-0');
                setTimeout(() => {
                    newEventPopup.classList.add('hidden');
                }, 300);
            }

            function clearForm() {
                eventType.value = '';
                eventTitle.value = '';
                eventDate.value = '';
                eventTime.value = '';
                eventDescription.value = '';
            }

            cancelNewEventBtn.addEventListener('click', () => {
                hidePopup();
                clearForm();
            });
            saveNewEventBtn.addEventListener('click', function() {
                if (eventTitle.value && eventDate.value && eventTime.value && eventDescription.value) {
                    calendar.addEvent({
                        title: eventTitle.value,
                        start: eventDate.value + 'T' + eventTime.value,
                        allDay: false,
                        description: eventDescription.value
                    });
                    hidePopup();
                    clearForm();
                } else {
                    alert('Please fill in all fields');
                }
            });

            newEventPopup.addEventListener('click', (e) => {
                if (e.target === newEventPopup) {
                    hidePopup();
                    clearForm();
                }
            });
        });
    </script>
</body>
</html>